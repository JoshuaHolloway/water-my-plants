(this["webpackJsonpwater-my-plants"]=this["webpackJsonpwater-my-plants"]||[]).push([[0],{14:function(e,t,n){e.exports={"main-header":"MainNavigation_main-header__1cu1i",nav:"MainNavigation_nav__2KID8",logo:"MainNavigation_logo__E7VmX"}},22:function(e,t,n){e.exports={"details-container":"PlantItem_details-container__2btML"}},23:function(e,t,n){e.exports={"nav-links":"NavLinks_nav-links__3w1gZ",active:"NavLinks_active__lFgwa"}},30:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},37:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(12),o=n.n(a),s=(n(30),n(2)),i=n(4),l=n(8),u=n(0),j=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("h1",{children:"Water My Plants!"})})},b=n(3),d=n.n(b),p=n(7),h=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(void 0),o=Object(s.a)(a,2),i=o[0],l=o[1],u=Object(c.useRef)([]),j=Object(c.useCallback)(function(){var e=Object(p.a)(d.a.mark((function e(t){var n,c,a,o,s,i,j=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:"GET",c=j.length>2&&void 0!==j[2]?j[2]:null,a=j.length>3&&void 0!==j[3]?j[3]:{},r(!0),o=new AbortController,u.current.push(o),e.prev=6,e.next=9,fetch(t,{method:n,body:c,headers:a,signal:o.signal});case 9:return s=e.sent,e.next=12,s.json();case 12:if(i=e.sent,console.log("responseData: ",i),u.current=u.current.filter((function(e){return e!==o})),s.ok){e.next=17;break}throw new Error(i.message);case 17:return r(!1),e.abrupt("return",i);case 21:throw e.prev=21,e.t0=e.catch(6),l(e.t0.message),r(!1),e.t0;case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(c.useEffect)((function(){return function(){u.current.forEach((function(e){e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:j,clearError:function(){l(null)}}},O=Object(c.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}}),f=n(24),x=n(43),g=(n(33),function(e){return o.a.createPortal(Object(u.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),m=(n(34),function(e){var t=Object(u.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(u.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(u.jsx)("h2",{children:e.header})}),Object(u.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(u.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(u.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return o.a.createPortal(t,document.getElementById("modal-hook"))}),v=function(e){return Object(u.jsxs)(r.a.Fragment,{children:[e.show&&Object(u.jsx)(g,{onClick:e.onCancel}),Object(u.jsx)(x.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(u.jsx)(m,Object(f.a)({},e))})]})},k=(n(37),function(e){return e.href?Object(u.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(u.jsx)(l.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(u.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),y=n(22),S=n.n(y),C=function(e){var t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=function(){return a(!1)},i=Object(c.useContext)(O),j=h().sendRequest,b=function(){var t=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/plants/").concat(e.id),"DELETE",null,{Authorization:"Bearer ".concat(i.token)});case 3:e.onDelete(e.id),t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(v,{show:r,onCancel:o,header:e.address,contentClass:"place-item__modal-content",footerClass:"place-item__modal-actions",footer:Object(u.jsx)(k,{onClick:o,children:"CLOSE"}),children:Object(u.jsxs)("div",{className:S.a["details-container"],children:[Object(u.jsxs)("p",{children:["Species: ",e.species]}),Object(u.jsxs)("p",{children:["Nickname: ",e.nickname]}),Object(u.jsxs)("p",{children:["H2O-Frequency: ",e.h2oFrequency]})]})}),Object(u.jsx)("li",{children:Object(u.jsxs)("div",{style:{border:"solid black 1px"},children:[Object(u.jsxs)("p",{children:["Nickname:"," ",Object(u.jsx)("span",{style:{backgroundColor:"lightgrey"},children:e.nickname})]}),Object(u.jsxs)("p",{children:["Species:"," ",Object(u.jsx)("span",{style:{backgroundColor:"lightgrey"},children:e.species})]}),Object(u.jsxs)("p",{children:["H2O-Frequency :"," ",Object(u.jsx)("span",{style:{backgroundColor:"lightgrey"},children:e.h2oFrequency})]}),Object(u.jsx)("button",{onClick:b,children:"DELETE"}),Object(u.jsx)("button",{children:Object(u.jsx)(l.c,{to:"/plants/".concat(e.id),children:"UPDATE"})}),Object(u.jsx)(k,{inverse:!0,onClick:function(){return a(!0)},children:"VIEW PLANT DETAILS"})]})})]})},w=function(e){return 0===e.items.length?Object(u.jsx)("h2",{children:"No plants found. Maybe create one?"}):Object(u.jsx)("ul",{children:e.items.map((function(t){return Object(u.jsx)(C,{id:t.id,image:t.image,nickname:t.nickname,species:t.species,h2oFrequency:t.h2oFrequency,onDelete:e.onDeletePlant},t.id)}))})},N=function(){var e=Object(c.useContext)(O),t=Object(c.useState)(),n=Object(s.a)(t,2),r=n[0],a=n[1],o=h(),i=o.isLoading,l=o.error,j=o.sendRequest;Object(c.useEffect)((function(){if(e.userId){var t=function(){var t=Object(p.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/plants/user/").concat(e.userId),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,a(n.plants),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("(UsersPlants.js) err: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e.userId,e.token,j]);return Object(u.jsxs)(u.Fragment,{children:[i&&Object(u.jsx)("h5",{children:"Loading..."}),l&&Object(u.jsx)("h5",{children:"ERROR!"}),!i&&r&&Object(u.jsx)(w,{items:r,onDeletePlant:function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})},I=function(){var e=Object(c.useContext)(O),t=h().sendRequest,n=Object(c.useState)("josh"),r=Object(s.a)(n,2),a=r[0],o=r[1],i=Object(c.useState)("josh@josh.com"),l=Object(s.a)(i,2),j=l[0],b=l[1],f=Object(c.useState)("password"),x=Object(s.a)(f,2),g=x[0],m=x[1];Object(c.useEffect)((function(){return console.log("name: ",a)}),[a]),Object(c.useEffect)((function(){return console.log("email: ",j)}),[j]),Object(c.useEffect)((function(){return console.log("password: ",g)}),[g]);var v=Object(c.useState)(!0),k=Object(s.a)(v,2),y=k[0],S=k[1],C=function(){var n=Object(p.a)(d.a.mark((function n(c){var r,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),console.log({name:a,email:j,password:g}),!y){n.next=15;break}return n.prev=3,n.next=6,t("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/users/login"),"POST",JSON.stringify({email:j,password:g}),{"Content-Type":"application/json"});case 6:r=n.sent,e.login(r.userId,r.token),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.log("failed login:  err: ",n.t0);case 13:n.next=25;break;case 15:return n.prev=15,n.next=18,t("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/users/signup"),"POST",JSON.stringify({name:a,email:j,password:g}),{"Content-Type":"application/json"});case 18:o=n.sent,e.login(o.userId),n.next=25;break;case 22:n.prev=22,n.t1=n.catch(15),console.log("failed login:  err: ",n.t1);case 25:case"end":return n.stop()}}),n,null,[[3,10],[15,22]])})));return function(e){return n.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("form",{onSubmit:C,children:[Object(u.jsx)("h2",{children:"Login Required"}),Object(u.jsx)("hr",{}),!y&&Object(u.jsxs)("label",{children:["name:",Object(u.jsx)("input",{type:"text",id:"name",value:a,onChange:function(e){return o(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{htmlFor:"email",children:["email:"," ",Object(u.jsx)("input",{type:"email",id:"email",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{htmlFor:"password",children:["password:"," ",Object(u.jsx)("input",{type:"password",id:"password",value:g,onChange:function(e){return m(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:y?"LOGIN":"SIGNUP"})]}),Object(u.jsx)("button",{type:"submit",onClick:function(){S((function(e){return!e}))},children:y?"SIGNUP":"LOGIN"})]})},E=n(23),_=n.n(E),F=function(e){var t=Object(c.useContext)(O);return console.log("NavLinks.js -- auth.userId: ",t.userId),Object(u.jsxs)("ul",{className:_.a["nav-links"],children:[t.isLoggedIn&&Object(u.jsx)("li",{children:Object(u.jsx)(l.c,{to:"/".concat(t.userId,"/plants"),children:"MY PLANTS"})}),t.isLoggedIn&&Object(u.jsx)("li",{children:Object(u.jsx)(l.c,{to:"/plants/new",children:"ADD PLANT"})}),t.isLoggedIn&&Object(u.jsx)("li",{children:Object(u.jsx)("button",{onClick:function(){t.logout()},children:"LOGOUT"})}),!t.isLoggedIn&&Object(u.jsx)("li",{children:Object(u.jsx)(l.c,{to:"/auth",children:"Log In"})})]})},P=n(14),q=n.n(P),L=function(e){return Object(u.jsxs)("header",{className:q.a["main-header"],children:[Object(u.jsx)("nav",{className:q.a.nav,children:Object(u.jsx)(F,{})}),Object(u.jsx)("h1",{className:q.a.logo,children:Object(u.jsx)(l.b,{to:"/",children:"Water Plants"})})]})},D=function(e){var t="BJthRQ5myDgc7OSXzPCMftGw-n16F7zQBEN7EUD6XxcfTTvrLGWSIG7y_JxiWtVlCFua0S8MTB5rPziBqNx1qIo";function n(){return(n=Object(p.a)(d.a.mark((function n(){var r,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Registering service worker..."),n.next=3,navigator.serviceWorker.register("/worker.js",{scope:"/"});case 3:return r=n.sent,console.log("Service Worker Registered..."),console.log("Registering Push..."),n.next=8,r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c(t)});case 8:return a=n.sent,console.log("Push Registered..."),console.log("Sending Push..."),n.next=13,fetch("http://localhost:5000/api/push/",{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json",Repeat_every_x_mins:String(e)}});case 13:console.log("Push Sent...");case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function c(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),c=new Uint8Array(n.length),r=0;r<n.length;++r)c[r]=n.charCodeAt(r);return c}"serviceWorker"in navigator&&function(){return n.apply(this,arguments)}().catch((function(e){return console.error("serviceWorker error: ",e)}))},T=function(){var e=Object(c.useContext)(O),t=Object(i.g)(),n=h().sendRequest,r=Object(c.useState)(""),a=Object(s.a)(r,2),o=a[0],l=a[1],j=Object(c.useState)(""),b=Object(s.a)(j,2),f=b[0],x=b[1],g=Object(c.useState)(""),m=Object(s.a)(g,2),v=m[0],k=m[1],y=Object(c.useState)(""),S=Object(s.a)(y,2),C=S[0],w=S[1];Object(c.useEffect)((function(){o&&console.log("nickname: ",o)}),[o]),Object(c.useEffect)((function(){f&&console.log("species: ",f)}),[f]),Object(c.useEffect)((function(){v&&console.log("image: ",v)}),[v]),Object(c.useEffect)((function(){C&&console.log("h2oFreq: ",C)}),[C]);var N=function(){var c=Object(p.a)(d.a.mark((function c(r){var a,s,i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r.preventDefault(),a={nickname:o,species:f,image:v,h2oFrequency:C},console.log("plant form data: ",a),c.prev=3,c.next=6,n("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/plants/add"),"POST",JSON.stringify(a),{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)});case 6:s=c.sent,console.log("responseData - NewPlant.js - plantSubmitHandler() : ",s),i=60/C,console.log("Need to water ".concat(C,"-times per hour.")),console.log("Remind every ".concat(i,"-minutes.")),D(i),t.push("/"),c.next=18;break;case 15:c.prev=15,c.t0=c.catch(3),console.log("err: ",c.t0);case 18:case"end":return c.stop()}}),c,null,[[3,15]])})));return function(e){return c.apply(this,arguments)}}();return Object(u.jsxs)("form",{onSubmit:N,children:[Object(u.jsxs)("label",{htmlFor:"nickname",children:["Nickname:",Object(u.jsx)("input",{type:"text",id:"nickname",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{htmlFor:"species",children:["Species:",Object(u.jsx)("input",{type:"text",id:"species",value:f,onChange:function(e){return x(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{htmlFor:"image",children:["Image:",Object(u.jsx)("input",{type:"text",id:"image",value:v,onChange:function(e){return k(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{htmlFor:"h2oFreq",children:["h2oFrequency:",Object(u.jsx)("input",{type:"text",id:"h2oFreq",value:C,onChange:function(e){return w(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:"Submit"})]})},R=function(){var e=Object(i.h)().plantId;console.log("plantId: ",e);var t=Object(c.useContext)(O),n=Object(i.g)(),r=h().sendRequest,a=Object(c.useState)(""),o=Object(s.a)(a,2),l=o[0],j=o[1],b=Object(c.useState)(""),f=Object(s.a)(b,2),x=f[0],g=f[1];Object(c.useEffect)((function(){return console.log("nickname: ",l)}),[l]),Object(c.useEffect)((function(){return console.log("species: ",x)}),[x]);Object(c.useEffect)((function(){console.clear();var n=function(){var n=Object(p.a)(d.a.mark((function n(){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("async fetchData()"),n.prev=1,n.next=4,r("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/plants/").concat(e),"GET",null,{Authorization:"Bearer ".concat(t.token)});case 4:c=n.sent,j(c.plant.nickname),g(c.plant.species),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("error sending request to api/plants/:plantId");case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[t.token,e,r]);var m=function(){var c=Object(p.a)(d.a.mark((function c(a){var o,s;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a.preventDefault(),o={nickname:l,species:x},console.log("plant form data: ",o),c.prev=3,c.next=6,r("".concat("https://dok2-motivational-quotes.herokuapp.com/api","/plants/").concat(e),"PATCH",JSON.stringify(o),{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)});case 6:s=c.sent,console.log("responseData - UpdatePlant.js - plantSubmitHandler() : ",s),n.push("/".concat(t.userId,"/plants")),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(3),console.log("err: ",c.t0);case 14:case"end":return c.stop()}}),c,null,[[3,11]])})));return function(e){return c.apply(this,arguments)}}();return Object(u.jsxs)("form",{onSubmit:m,children:[Object(u.jsx)("h5",{children:"Update Plant"}),Object(u.jsxs)("label",{htmlFor:"nickname",children:["Nickname:",Object(u.jsx)("input",{type:"text",id:"nickname",value:l,onChange:function(e){return j(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsxs)("label",{htmlFor:"species",children:["Species:",Object(u.jsx)("input",{type:"text",id:"species",value:x,onChange:function(e){return g(e.target.value)}})]}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"submit",children:"Submit"})]})},A=function(){var e,t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),b=Object(s.a)(o,2),d=b[0],p=b[1],h=Object(c.useCallback)((function(e,t){console.log("App.js -- login()"),a(t),p(e),localStorage.setItem("userData",JSON.stringify({userId:e,token:t}))}),[]),f=Object(c.useCallback)((function(){a(null),p(null),localStorage.removeItem("userData")}),[]);Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&h(e.userId,e.token)}),[h]),e=r?Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/",exact:!0,children:Object(u.jsx)(N,{})}),Object(u.jsx)(i.b,{path:"/:userId/plants",exact:!0,children:Object(u.jsx)(N,{})}),Object(u.jsx)(i.b,{path:"/plants/new",exact:!0,children:Object(u.jsx)(T,{})}),Object(u.jsx)(i.b,{path:"/plants/:plantId",children:Object(u.jsx)(R,{})}),Object(u.jsx)(i.a,{to:"/"})]}):Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{path:"/",exact:!0,children:Object(u.jsx)(j,{})}),Object(u.jsx)(i.b,{path:"/auth",children:Object(u.jsx)(I,{})}),Object(u.jsx)(i.a,{to:"/auth"})]});var x=Object(c.useState)(!1),g=Object(s.a)(x,2),m=(g[0],g[1],Object(c.useState)(!1)),v=Object(s.a)(m,2);v[0],v[1];return Object(u.jsx)(O.Provider,{value:{isLoggedIn:!!r,token:r,userId:d,login:h,logout:f},children:Object(u.jsxs)(l.a,{children:[Object(u.jsx)(L,{}),Object(u.jsx)("main",{children:e})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root")),B()}},[[41,1,2]]]);
//# sourceMappingURL=main.ef41511b.chunk.js.map